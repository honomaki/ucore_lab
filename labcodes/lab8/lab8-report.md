# 实验八：文件系统
<br/>
## 练习1: 完成读文件操作的实现
在sfs_inode.c::sfs_io_nolock中，先判断开头大小，如果小于一块， 就直接调用buf_io后返回。如果大于一块，中间的每块也用调用blk_io。直到最后块，此时判断结尾块大小，然后继续调用buf_io。ret表示是否操作成功，alen表示长度。

对于UNIX的PIPE机制，可在管道内使用以下变量，读、写指针，互斥锁，缓冲区。读写指针表示数组的读入读出位置，当读写指针重合时，挂起正在读的进程。此时使用互斥锁保证一个进程在操作时不会有其他进程同时操作，并且使写入操作完成后唤醒读进程。

## 练习2: 完成基于文件系统的执行程序机制的实现

对lab8之前的load_icode函数进行一下修改，之前是直接在缓存读取，在lab8使用了一个文件描述符，从文件中读取文件头和程序段。即把原来在缓存中读取修改为用调用load_icode_read函数读取。

实现软连接，可以直接在软连接文件中存储一个文件名即可，解析这个文件时直接转去解析源文件地址。实现硬链接，可以把文件的inode直接设置源文件的inode，并加一项用来存储硬链接的个数，只有该项为零时才能被完全删除，不为0时则保留。